<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Gestion des notes - Eureka CRM">
  <meta name="author" content="jprud67">
  <title>Notes - Eureka CRM</title>
  
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="../assets/css/variables.css" rel="stylesheet">
  <link href="../assets/css/style.css" rel="stylesheet">
  <link href="../assets/css/components.css" rel="stylesheet">
  <style>
    .notes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    .note-card {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 1rem;
      transition: all 0.3s;
      cursor: pointer;
      background: white;
    }
    .note-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }
    .note-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    .note-title {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--primary-color);
      margin: 0;
    }
    .note-meta {
      font-size: 0.85rem;
      color: #6c757d;
      margin-bottom: 0.5rem;
    }
    .note-content {
      color: #495057;
      line-height: 1.6;
      max-height: 100px;
      overflow: hidden;
    }
    .note-tags {
      margin-top: 0.75rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .note-tag {
      background: #f0f0f0;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.85rem;
    }
    .note-actions {
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px solid #e0e0e0;
      display: flex;
      gap: 0.5rem;
    }
    .editor-container {
      height: 300px;
    }
  </style>
</head>
<body>
  
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <a href="../index.html" class="logo-link">
        <img src="../assets/img/logo-light.png" alt="Eureka CRM" class="logo">
      </a>
      <button class="btn-close-sidebar d-lg-none" id="closeSidebar">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <nav class="sidebar-nav">
      <ul class="sidebar-menu">
        <li class="nav-item">
          <a href="../index.html" class="nav-link">
            <i class="fas fa-chart-pie"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="files-list.html" class="nav-link">
            <i class="fas fa-folder-open"></i>
            <span>Dossiers</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="customers-list.html" class="nav-link">
            <i class="fas fa-users"></i>
            <span>Clients</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="documents.html" class="nav-link">
            <i class="fas fa-file-alt"></i>
            <span>Documents</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="notes.html" class="nav-link active">
            <i class="fas fa-sticky-note"></i>
            <span>Notes</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="reminders.html" class="nav-link">
            <i class="fas fa-bell"></i>
            <span>Rappels</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="rewards.html" class="nav-link">
            <i class="fas fa-trophy"></i>
            <span>Rewards</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="reports.html" class="nav-link">
            <i class="fas fa-chart-bar"></i>
            <span>Rapports</span>
          </a>
        </li>
      </ul>
      
      <div class="sidebar-divider"></div>
      
      <ul class="sidebar-menu">
        <li class="nav-item">
          <a href="settings.html" class="nav-link">
            <i class="fas fa-cog"></i>
            <span>Paramètres</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="auth/login.html" class="nav-link">
            <i class="fas fa-sign-out-alt"></i>
            <span>Déconnexion</span>
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    
    <!-- Top Header -->
    <header class="top-header">
      <div class="header-left">
        <button class="btn-toggle-sidebar d-lg-none" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
        
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" class="form-control" id="searchNotes" placeholder="Rechercher une note...">
        </div>
      </div>
      
      <div class="header-right">
        <div class="header-item">
          <button class="btn-header" id="notificationsBtn">
            <i class="fas fa-bell"></i>
            <span class="badge-count">3</span>
          </button>
        </div>
        
        <div class="header-item">
          <button class="btn-header" id="messagesBtn">
            <i class="fas fa-envelope"></i>
            <span class="badge-count">5</span>
          </button>
        </div>
        
        <div class="header-item dropdown">
          <button class="btn-profile dropdown-toggle" data-bs-toggle="dropdown">
            <img src="https://ui-avatars.com/api/?name=Jean+Dupont&background=292A5F&color=F3E600" alt="User" class="avatar">
            <span class="user-name">Jean Dupont</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="auth/profile.html">
              <i class="fas fa-user me-2"></i>Mon Profil
            </a></li>
            <li><a class="dropdown-item" href="settings.html">
              <i class="fas fa-cog me-2"></i>Paramètres
            </a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="auth/login.html">
              <i class="fas fa-sign-out-alt me-2"></i>Déconnexion
            </a></li>
          </ul>
        </div>
      </div>
    </header>
    
    <!-- Page Content -->
    <div class="page-content">
      <div class="container-fluid">
        
        <!-- Page Header -->
        <div class="page-header">
          <div>
            <h1 class="page-title">Notes</h1>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../index.html">Accueil</a></li>
                <li class="breadcrumb-item active">Notes</li>
              </ol>
            </nav>
          </div>
          <div>
            <button class="btn btn-eureka-primary" data-bs-toggle="modal" data-bs-target="#newNoteModal">
              <i class="fas fa-plus me-2"></i>Nouvelle Note
            </button>
          </div>
        </div>

        <!-- Stats -->
        <div class="row mb-4">
          <div class="col-md-3 mb-3">
            <div class="card text-center">
              <div class="card-body">
                <i class="fas fa-sticky-note fa-2x text-primary mb-2"></i>
                <h3 class="mb-1">48</h3>
                <p class="text-muted mb-0">Total Notes</p>
              </div>
            </div>
          </div>
          <div class="col-md-3 mb-3">
            <div class="card text-center">
              <div class="card-body">
                <i class="fas fa-star fa-2x text-warning mb-2"></i>
                <h3 class="mb-1">12</h3>
                <p class="text-muted mb-0">Notes Favorites</p>
              </div>
            </div>
          </div>
          <div class="col-md-3 mb-3">
            <div class="card text-center">
              <div class="card-body">
                <i class="fas fa-tags fa-2x text-success mb-2"></i>
                <h3 class="mb-1">8</h3>
                <p class="text-muted mb-0">Tags Actifs</p>
              </div>
            </div>
          </div>
          <div class="col-md-3 mb-3">
            <div class="card text-center">
              <div class="card-body">
                <i class="fas fa-clock fa-2x text-info mb-2"></i>
                <h3 class="mb-1">5</h3>
                <p class="text-muted mb-0">Aujourd'hui</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Filters -->
        <div class="card mb-4">
          <div class="card-body">
            <div class="row g-3 align-items-end">
              <div class="col-md-3">
                <label class="form-label">Trier par</label>
                <select class="form-select" id="sortNotes">
                  <option value="recent">Plus récentes</option>
                  <option value="oldest">Plus anciennes</option>
                  <option value="title">Titre (A-Z)</option>
                  <option value="modified">Dernière modification</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">Filtrer par tag</label>
                <select class="form-select" id="filterTag">
                  <option value="">Tous les tags</option>
                  <option value="important">Important</option>
                  <option value="client">Client</option>
                  <option value="reunion">Réunion</option>
                  <option value="idee">Idée</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">Dossier</label>
                <select class="form-select" id="filterFile">
                  <option value="">Tous les dossiers</option>
                  <option value="156">DOS-2025-156</option>
                  <option value="155">DOS-2025-155</option>
                  <option value="154">DOS-2025-154</option>
                </select>
              </div>
              <div class="col-md-3">
                <button class="btn btn-eureka-secondary w-100">
                  <i class="fas fa-star me-2"></i>Favorites uniquement
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Notes Grid -->
        <div class="notes-grid">
          
          <!-- Note 1 -->
          <div class="note-card">
            <div class="note-header">
              <h5 class="note-title">Appel client Martin Énergies</h5>
              <button class="btn btn-sm btn-link text-warning p-0">
                <i class="fas fa-star"></i>
              </button>
            </div>
            <div class="note-meta">
              <i class="fas fa-calendar me-1"></i>18/11/2025 14:30 • 
              <i class="fas fa-user ms-2 me-1"></i>Jean Dupont
            </div>
            <div class="note-content">
              Discussion avec M. Martin sur les conditions du contrat. Client intéressé par l'offre premium. 
              Prévoir relance la semaine prochaine pour finaliser les détails techniques.
            </div>
            <div class="note-tags">
              <span class="note-tag"><i class="fas fa-tag me-1"></i>important</span>
              <span class="note-tag"><i class="fas fa-tag me-1"></i>client</span>
            </div>
            <div class="note-actions">
              <button class="btn btn-sm btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editNoteModal">
                <i class="fas fa-edit"></i> Éditer
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteRecord(1, 'note')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <!-- Note 2 -->
          <div class="note-card">
            <div class="note-header">
              <h5 class="note-title">Idées amélioration processus</h5>
              <button class="btn btn-sm btn-link text-muted p-0">
                <i class="far fa-star"></i>
              </button>
            </div>
            <div class="note-meta">
              <i class="fas fa-calendar me-1"></i>17/11/2025 10:15 • 
              <i class="fas fa-user ms-2 me-1"></i>Sophie Martin
            </div>
            <div class="note-content">
              - Automatiser l'envoi des relances clients<br>
              - Créer des templates de devis personnalisables<br>
              - Intégrer un système de signature électronique
            </div>
            <div class="note-tags">
              <span class="note-tag"><i class="fas fa-tag me-1"></i>idee</span>
              <span class="note-tag"><i class="fas fa-tag me-1"></i>processus</span>
            </div>
            <div class="note-actions">
              <button class="btn btn-sm btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editNoteModal">
                <i class="fas fa-edit"></i> Éditer
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteRecord(2, 'note')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <!-- Note 3 -->
          <div class="note-card">
            <div class="note-header">
              <h5 class="note-title">Compte-rendu réunion équipe</h5>
              <button class="btn btn-sm btn-link text-warning p-0">
                <i class="fas fa-star"></i>
              </button>
            </div>
            <div class="note-meta">
              <i class="fas fa-calendar me-1"></i>16/11/2025 16:00 • 
              <i class="fas fa-user ms-2 me-1"></i>Marc Dubois
            </div>
            <div class="note-content">
              Objectifs du mois : 25 nouveaux dossiers signés. Sophie en tête avec 8 signatures.
              Formation prévue le 25/11 sur les nouvelles offres CEE.
            </div>
            <div class="note-tags">
              <span class="note-tag"><i class="fas fa-tag me-1"></i>reunion</span>
              <span class="note-tag"><i class="fas fa-tag me-1"></i>equipe</span>
            </div>
            <div class="note-actions">
              <button class="btn btn-sm btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editNoteModal">
                <i class="fas fa-edit"></i> Éditer
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteRecord(3, 'note')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <!-- Note 4 -->
          <div class="note-card">
            <div class="note-header">
              <h5 class="note-title">Suivi Boulangerie Dupont</h5>
              <button class="btn btn-sm btn-link text-muted p-0">
                <i class="far fa-star"></i>
              </button>
            </div>
            <div class="note-meta">
              <i class="fas fa-calendar me-1"></i>15/11/2025 09:45 • 
              <i class="fas fa-user ms-2 me-1"></i>Jean Dupont
            </div>
            <div class="note-content">
              Installation prévue le 20/11. Client satisfait du suivi. 
              Penser à demander un avis Google après installation.
            </div>
            <div class="note-tags">
              <span class="note-tag"><i class="fas fa-tag me-1"></i>client</span>
              <span class="note-tag"><i class="fas fa-tag me-1"></i>suivi</span>
            </div>
            <div class="note-actions">
              <button class="btn btn-sm btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editNoteModal">
                <i class="fas fa-edit"></i> Éditer
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteRecord(4, 'note')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <!-- Note 5 -->
          <div class="note-card">
            <div class="note-header">
              <h5 class="note-title">Veille concurrence</h5>
              <button class="btn btn-sm btn-link text-muted p-0">
                <i class="far fa-star"></i>
              </button>
            </div>
            <div class="note-meta">
              <i class="fas fa-calendar me-1"></i>14/11/2025 11:20 • 
              <i class="fas fa-user ms-2 me-1"></i>Sophie Martin
            </div>
            <div class="note-content">
              Nouveau concurrent sur le marché avec offres agressives. 
              Analyser leur stratégie tarifaire et ajuster nos propositions si nécessaire.
            </div>
            <div class="note-tags">
              <span class="note-tag"><i class="fas fa-tag me-1"></i>veille</span>
              <span class="note-tag"><i class="fas fa-tag me-1"></i>strategie</span>
            </div>
            <div class="note-actions">
              <button class="btn btn-sm btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editNoteModal">
                <i class="fas fa-edit"></i> Éditer
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteRecord(5, 'note')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <!-- Note 6 -->
          <div class="note-card">
            <div class="note-header">
              <h5 class="note-title">Formation nouveaux produits</h5>
              <button class="btn btn-sm btn-link text-muted p-0">
                <i class="far fa-star"></i>
              </button>
            </div>
            <div class="note-meta">
              <i class="fas fa-calendar me-1"></i>13/11/2025 14:00 • 
              <i class="fas fa-user ms-2 me-1"></i>Marc Dubois
            </div>
            <div class="note-content">
              Session de formation sur les nouvelles pompes à chaleur. 
              Rendement exceptionnel, arguments de vente solides pour convaincre les clients.
            </div>
            <div class="note-tags">
              <span class="note-tag"><i class="fas fa-tag me-1"></i>formation</span>
              <span class="note-tag"><i class="fas fa-tag me-1"></i>produit</span>
            </div>
            <div class="note-actions">
              <button class="btn btn-sm btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editNoteModal">
                <i class="fas fa-edit"></i> Éditer
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteRecord(6, 'note')">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

        </div>

      </div>
    </div>
    
  </main>

  <!-- New Note Modal -->
  <div class="modal fade" id="newNoteModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fas fa-plus me-2"></i>Nouvelle Note</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label class="form-label">Titre de la note</label>
              <input type="text" class="form-control" placeholder="Ex: Appel client..." required>
            </div>
            <div class="mb-3">
              <label class="form-label">Dossier associé (optionnel)</label>
              <select class="form-select">
                <option value="">Aucun dossier</option>
                <option value="156">DOS-2025-156 - SARL Martin Énergies</option>
                <option value="155">DOS-2025-155 - Boulangerie Dupont</option>
                <option value="154">DOS-2025-154 - Restaurant Le Gourmet</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Contenu</label>
              <div class="editor-container">
                <div id="noteEditor"></div>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Tags</label>
              <input type="text" class="form-control" placeholder="Séparer les tags par des virgules">
              <small class="text-muted">Ex: important, client, reunion</small>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="favNote">
              <label class="form-check-label" for="favNote">
                <i class="fas fa-star text-warning me-1"></i>Marquer comme favori
              </label>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
          <button type="button" class="btn btn-eureka-primary">
            <i class="fas fa-save me-2"></i>Enregistrer
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay for mobile sidebar -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="../assets/js/sidebar.js"></script>
  <script src="../assets/js/main.js"></script>
  <script src="../assets/js/components.js"></script>
  
  <script>
    // Initialize Quill editor
    var quill = new Quill('#noteEditor', {
      theme: 'snow',
      placeholder: 'Saisir le contenu de la note...',
      modules: {
        toolbar: [
          ['bold', 'italic', 'underline', 'strike'],
          ['blockquote', 'code-block'],
          [{ 'list': 'ordered'}, { 'list': 'bullet' }],
          [{ 'header': [1, 2, 3, false] }],
          ['link'],
          ['clean']
        ]
      }
    });

    // Search notes
    document.getElementById('searchNotes').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const notes = document.querySelectorAll('.note-card');
      
      notes.forEach(note => {
        const title = note.querySelector('.note-title').textContent.toLowerCase();
        const content = note.querySelector('.note-content').textContent.toLowerCase();
        
        if (title.includes(searchTerm) || content.includes(searchTerm)) {
          note.style.display = 'block';
        } else {
          note.style.display = 'none';
        }
      });
    });

    // Toggle favorite
    document.querySelectorAll('.note-header button').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.stopPropagation();
        const icon = this.querySelector('i');
        if (icon.classList.contains('far')) {
          icon.classList.remove('far', 'text-muted');
          icon.classList.add('fas', 'text-warning');
        } else {
          icon.classList.remove('fas', 'text-warning');
          icon.classList.add('far', 'text-muted');
        }
      });
    });
  </script>
</body>
</html>
